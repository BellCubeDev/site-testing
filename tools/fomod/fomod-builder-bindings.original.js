import * as mainClasses from './fomod-builder-classifications.js';
import { registerForEvents, UpdatableObject } from '../../universal.js';
export class ModMetadata extends UpdatableObject {
    parent;
    get metaName() { return this.parent.metaName; }
    set metaName(value) { this.parent.metaName = value; this.update(); }
    nameInput;
    get author() { return this.parent.metaAuthor; }
    set author(value) { this.parent.metaAuthor = value; this.update(); }
    authorInput;
    get version() { return this.parent.metaVersion; }
    set version(value) { this.parent.metaVersion = value; this.update(); }
    versionInput;
    get id() { return this.parent.metaId; }
    set id(value) { this.parent.metaId = value; this.update(); }
    idInput;
    get url() { return this.parent.getURLAsString(); }
    set url(value) { this.parent.metaUrl = value; this.update(); }
    urlInput;
    constructor(parent) {
        super();
        this.parent = parent;
        this.nameInput = document.getElementById("metadata-mod-name").getOrCreateChildByTag('input');
        this.authorInput = document.getElementById("metadata-mod-author").getOrCreateChildByTag('input');
        this.versionInput = document.getElementById("metadata-mod-version").getOrCreateChildByTag('input');
        this.idInput = document.getElementById("metadata-mod-id").getOrCreateChildByTag('input');
        this.urlInput = document.getElementById("metadata-mod-url").getOrCreateChildByTag('input');
        registerForEvents(this.nameInput, { change: this.updateFromInput_bound });
        registerForEvents(this.authorInput, { change: this.updateFromInput_bound });
        registerForEvents(this.versionInput, { change: this.updateFromInput_bound });
        registerForEvents(this.idInput, { change: this.updateFromInput_bound });
        registerForEvents(this.urlInput, { change: this.updateFromInput_bound });
    }
    updateFromInput_() {
        this.metaName = this.nameInput.value;
        this.author = this.authorInput.value;
        this.version = this.versionInput.value;
        this.url = this.urlInput.value;
        const [, id] = this.idInput.value.match(/^\s*(\d+)\s*$/) ?? [];
        if (id)
            this.id = parseInt(id);
        else
            this.id = null;
    }
    update_() {
        this.nameInput.value = this.metaName;
        this.nameInput.dispatchEvent(new Event('input'));
        this.authorInput.value = this.author;
        this.authorInput.dispatchEvent(new Event('input'));
        this.versionInput.value = this.version;
        this.versionInput.dispatchEvent(new Event('input'));
        this.idInput.value = this.id?.toString() ?? '';
        this.idInput.dispatchEvent(new Event('input'));
        this.urlInput.value = this.url;
        this.urlInput.dispatchEvent(new Event('input'));
    }
}
mainClasses.addUpdateObjects(mainClasses.Fomod, ModMetadata);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZm9tb2QtYnVpbGRlci1iaW5kaW5ncy5qcyIsInNvdXJjZVJvb3QiOiJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vQmVsbEN1YmVEZXYvc2l0ZS10ZXN0aW5nL2RlcGxveW1lbnQvIiwic291cmNlcyI6WyJ0b29scy9mb21vZC9mb21vZC1idWlsZGVyLWJpbmRpbmdzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUdBLE9BQU8sS0FBSyxXQUFXLE1BQU0sb0NBQW9DLENBQUM7QUFDbEUsT0FBTyxFQUFFLGlCQUFpQixFQUFFLGVBQWUsRUFBRSxNQUFNLG9CQUFvQixDQUFDO0FBRXhFLE1BQU0sT0FBTyxXQUFZLFNBQVEsZUFBZTtJQUM1QyxNQUFNLENBQW9CO0lBRzFCLElBQUksUUFBUSxLQUFhLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDO0lBQUMsSUFBSSxRQUFRLENBQUMsS0FBYSxJQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxHQUFHLEtBQUssQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDLENBQUM7SUFDcEksU0FBUyxDQUFtQjtJQUc1QixJQUFJLE1BQU0sS0FBYSxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQztJQUFDLElBQUksTUFBTSxDQUFDLEtBQWEsSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLFVBQVUsR0FBRyxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBQ3BJLFdBQVcsQ0FBbUI7SUFHOUIsSUFBSSxPQUFPLEtBQWEsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUM7SUFBQyxJQUFJLE9BQU8sQ0FBQyxLQUFhLElBQUksSUFBSSxDQUFDLE1BQU0sQ0FBQyxXQUFXLEdBQUcsS0FBSyxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFD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LEVBQUUsR0FBRyxJQUFJLENBQUM7SUFDeEIsQ0FBQztJQUVRLE9BQU87UUFDWixJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDO1FBQWUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxhQUFhLENBQUMsSUFBSSxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQztRQUNyRyxJQUFJLENBQUMsV0FBVyxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDO1FBQVcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxhQUFhLENBQUMsSUFBSSxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQztRQUNuRyxJQUFJLENBQUMsWUFBWSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDO1FBQVMsSUFBSSxDQUFDLFlBQVksQ0FBQyxhQUFhLENBQUMsSUFBSSxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQztRQUNwRyxJQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsRUFBRSxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsQ0FBQztRQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLElBQUksS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7UUFDL0YsSUFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQztRQUFpQixJQUFJLENBQUMsUUFBUSxDQUFDLGFBQWEsQ0FBQyxJQUFJLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO0lBQ3BHLENBQUM7Q0FDSjtBQUNELFdBQVcsQ0FBQyxnQkFBZ0IsQ0FBQyxXQUFXLENBQUMsS0FBSyxFQUFFLFdBQVcsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqIFRoaXMgZmlsZSBjb250YWlucyBjb2RlIHRvIHVwZGF0ZSB0aGUgaW5mb3JtYXRpb24gZGlzcGxheWVkIHdpdGhpbiB0aGUgbWFpbkNsYXNzZXMuRm9tb2QgQnVpbGRlciBVSVxuICovXG5cbmltcG9ydCAqIGFzIG1haW5DbGFzc2VzIGZyb20gJy4vZm9tb2QtYnVpbGRlci1jbGFzc2lmaWNhdGlvbnMuanMnO1xuaW1wb3J0IHsgcmVnaXN0ZXJGb3JFdmVudHMsIFVwZGF0YWJsZU9iamVjdCB9IGZyb20gJy4uLy4uL3VuaXZlcnNhbC5qcyc7XG5cbmV4cG9ydCBjbGFzcyBNb2RNZXRhZGF0YSBleHRlbmRzIFVwZGF0YWJsZU9iamVjdCB7XG4gICAgcGFyZW50OiBtYWluQ2xhc3Nlcy5Gb21vZDtcblxuICAgIC8qKiBUaGUgbmFtZSBvZiB0aGUgbW9kICovXG4gICAgZ2V0IG1ldGFOYW1lKCk6IHN0cmluZyB7IHJldHVybiB0aGlzLnBhcmVudC5tZXRhTmFtZTsgfSBzZXQgbWV0YU5hbWUodmFsdWU6IHN0cmluZykgeyB0aGlzLnBhcmVudC5tZXRhTmFtZSA9IHZhbHVlOyB0aGlzLnVwZGF0ZSgpOyB9XG4gICAgbmFtZUlucHV0OiBIVE1MSW5wdXRFbGVtZW50O1xuXG4gICAgLyoqIFRoZSBhdXRob3Igb2YgdGhlIG1vZCAqL1xuICAgIGdldCBhdXRob3IoKTogc3RyaW5nIHsgcmV0dXJuIHRoaXMucGFyZW50Lm1ldGFBdXRob3I7IH0gc2V0IGF1dGhvcih2YWx1ZTogc3RyaW5nKSB7IHRoaXMucGFyZW50Lm1ldGFBdXRob3IgPSB2YWx1ZTsgdGhpcy51cGRhdGUoKTsgfVxuICAgIGF1dGhvcklucHV0OiBIVE1MSW5wdXRFbGVtZW50O1xuXG4gICAgLyoqIFRoZSB2ZXJzaW9uIG9mIHRoZSBtb2QgKi9cbiAgICBnZXQgdmVyc2lvbigpOiBzdHJpbmcgeyByZXR1cm4gdGhpcy5wYXJlbnQubWV0YVZlcnNpb247IH0gc2V0IHZlcnNpb24odmFsdWU6IHN0cmluZykgeyB0aGlzLnBhcmVudC5tZXRhVmVyc2lvbiA9IHZhbHVlOyB0aGlzLnVwZGF0ZSgpOyB9XG4gICAgdmVyc2lvbklucHV0OiBIVE1MSW5wdXRFbGVtZW50O1xuXG4gICAgLyoqIFRoZSBJRCBvZiB0aGUgbW9kICovXG4gICAgZ2V0IGlkKCk6IG51bWJlcnxudWxsIHsgcmV0dXJuIHRoaXMucGFyZW50Lm1ldGFJZDsgfSBzZXQgaWQodmFsdWU6IG51bWJlcnxudWxsKSB7IHRoaXMucGFyZW50Lm1ldGFJZCA9IHZhbHVlOyB0aGlzLnVwZGF0ZSgpOyB9XG4gICAgaWRJbnB1dDogSFRNTElucHV0RWxlbWVudDtcblxuICAgIC8qKiBUaGUgVVJMIG9mIHRoZSBtb2QgKi9cbiAgICBnZXQgdXJsKCk6IHN0cmluZyB7IHJldHVybiB0aGlzLnBhcmVudC5nZXRVUkxBc1N0cmluZygpOyB9IHNldCB1cmwodmFsdWU6IFVSTHxzdHJpbmcpIHsgdGhpcy5wYXJlbnQubWV0YVVybCA9IHZhbHVlOyB0aGlzLnVwZGF0ZSgpOyB9XG4gICAgdXJsSW5wdXQ6IEhUTUxJbnB1dEVsZW1lbnQ7XG5cbiAgICBjb25zdHJ1Y3RvcihwYXJlbnQ6IG1haW5DbGFzc2VzLkZvbW9kKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuXG4gICAgICAgIHRoaXMubmFtZUlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtZXRhZGF0YS1tb2QtbmFtZVwiKSEuZ2V0T3JDcmVhdGVDaGlsZEJ5VGFnKCdpbnB1dCcpO1xuICAgICAgICB0aGlzLmF1dGhvcklucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtZXRhZGF0YS1tb2QtYXV0aG9yXCIpIS5nZXRPckNyZWF0ZUNoaWxkQnlUYWcoJ2lucHV0Jyk7XG4gICAgICAgIHRoaXMudmVyc2lvbklucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtZXRhZGF0YS1tb2QtdmVyc2lvblwiKSEuZ2V0T3JDcmVhdGVDaGlsZEJ5VGFnKCdpbnB1dCcpO1xuICAgICAgICB0aGlzLmlkSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1ldGFkYXRhLW1vZC1pZFwiKSEuZ2V0T3JDcmVhdGVDaGlsZEJ5VGFnKCdpbnB1dCcpO1xuICAgICAgICB0aGlzLnVybElucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtZXRhZGF0YS1tb2QtdXJsXCIpIS5nZXRPckNyZWF0ZUNoaWxkQnlUYWcoJ2lucHV0Jyk7XG5cbiAgICAgICAgcmVnaXN0ZXJGb3JFdmVudHModGhpcy5uYW1lSW5wdXQsIHtjaGFuZ2U6IHRoaXMudXBkYXRlRnJvbUlucHV0X2JvdW5kfSk7XG4gICAgICAgIHJlZ2lzdGVyRm9yRXZlbnRzKHRoaXMuYXV0aG9ySW5wdXQsIHtjaGFuZ2U6IHRoaXMudXBkYXRlRnJvbUlucHV0X2JvdW5kfSk7XG4gICAgICAgIHJlZ2lzdGVyRm9yRXZlbnRzKHRoaXMudmVyc2lvbklucHV0LCB7Y2hhbmdlOiB0aGlzLnVwZGF0ZUZyb21JbnB1dF9ib3VuZH0pO1xuICAgICAgICByZWdpc3RlckZvckV2ZW50cyh0aGlzLmlkSW5wdXQsIHtjaGFuZ2U6IHRoaXMudXBkYXRlRnJvbUlucHV0X2JvdW5kfSk7XG4gICAgICAgIHJlZ2lzdGVyRm9yRXZlbnRzKHRoaXMudXJsSW5wdXQsIHtjaGFuZ2U6IHRoaXMudXBkYXRlRnJvbUlucHV0X2JvdW5kfSk7XG4gICAgfVxuXG4gICAgb3ZlcnJpZGUgdXBkYXRlRnJvbUlucHV0XygpIHtcbiAgICAgICAgdGhpcy5tZXRhTmFtZSA9IHRoaXMubmFtZUlucHV0LnZhbHVlO1xuICAgICAgICB0aGlzLmF1dGhvciA9IHRoaXMuYXV0aG9ySW5wdXQudmFsdWU7XG4gICAgICAgIHRoaXMudmVyc2lvbiA9IHRoaXMudmVyc2lvbklucHV0LnZhbHVlO1xuICAgICAgICB0aGlzLnVybCA9IHRoaXMudXJsSW5wdXQudmFsdWU7XG5cbiAgICAgICAgY29uc3QgWyxpZF0gPSB0aGlzLmlkSW5wdXQudmFsdWUubWF0Y2goL15cXHMqKFxcZCspXFxzKiQvKSA/PyBbXTtcbiAgICAgICAgaWYgKGlkKSB0aGlzLmlkID0gcGFyc2VJbnQoaWQpO1xuICAgICAgICBlbHNlIHRoaXMuaWQgPSBudWxsO1xuICAgIH1cblxuICAgIG92ZXJyaWRlIHVwZGF0ZV8oKSB7XG4gICAgICAgIHRoaXMubmFtZUlucHV0LnZhbHVlID0gdGhpcy5tZXRhTmFtZTsgICAgICAgICAgICAgICB0aGlzLm5hbWVJbnB1dC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgnaW5wdXQnKSk7XG4gICAgICAgIHRoaXMuYXV0aG9ySW5wdXQudmFsdWUgPSB0aGlzLmF1dGhvcjsgICAgICAgICAgIHRoaXMuYXV0aG9ySW5wdXQuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoJ2lucHV0JykpO1xuICAgICAgICB0aGlzLnZlcnNpb25JbnB1dC52YWx1ZSA9IHRoaXMudmVyc2lvbjsgICAgICAgICB0aGlzLnZlcnNpb25JbnB1dC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgnaW5wdXQnKSk7XG4gICAgICAgIHRoaXMuaWRJbnB1dC52YWx1ZSA9IHRoaXMuaWQ/LnRvU3RyaW5nKCkgPz8gJyc7IHRoaXMuaWRJbnB1dC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgnaW5wdXQnKSk7XG4gICAgICAgIHRoaXMudXJsSW5wdXQudmFsdWUgPSB0aGlzLnVybDsgICAgICAgICAgICAgICAgIHRoaXMudXJsSW5wdXQuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoJ2lucHV0JykpO1xuICAgIH1cbn1cbm1haW5DbGFzc2VzLmFkZFVwZGF0ZU9iamVjdHMobWFpbkNsYXNzZXMuRm9tb2QsIE1vZE1ldGFkYXRhKTtcbiJdfQ==