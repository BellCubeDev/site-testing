'use strict';
var rules = [];
function type(obj) {
    return Object.prototype.toString.call(obj).slice(8, -1);
}
function addRule(match, result) {
    rules.unshift([match, result]);
    return plural;
}
addRule(/[^aeiou]y$|quy$/i, function (w) { return w.substr(0, w.length - 1) + 'ies'; });
addRule(/x$|ch$|s$/i, function (w) { return w + 'es'; });
addRule(/nucleus|syllabus|focus|fungus|cactus/i, function (w) { return w.substr(0, w.length - 2) + 'i'; });
addRule(/thesis|crisis/i, function (w) { return w.substr(0, w.length - 2) + 'es'; });
addRule(/appendix|index/i, function (w) { return w.substr(0, w.length - 2) + 'ices'; });
addRule(/[aeiouy]o$/i, function (w) { return w + 's'; });
addRule(/[^aeiouy]o$/i, function (w) { return w + 'es'; });
addRule(/(fe?$)/i, function (w, regex) {
    if (w === 'dwarf' || w === 'roof') {
        return w + 's';
    }
    return w.replace(regex, 'ves');
});
addRule('criterion', 'criteria');
addRule('bacterium', 'bacteria');
addRule('memo', 'memos');
addRule('cello', 'cellos');
addRule('die', 'dice');
addRule('goose', 'geese');
addRule('mouse', 'mice');
addRule('person', 'people');
addRule('chilli', 'chillies');
addRule(/^(?:wo)?man$/i, function (w) { return w.replace(/a/, 'e'); });
addRule(/\b(?:bison|cod|deer|fowl|halibut|moose|sheep)\b/i, function (w) { return w; });
var tools = ['goggle', 'scissor', 'plier', 'tong', 'tweezer'];
var clothes = ['trouser', 'pant', 'pantie', 'clothe'];
var games = ['billiard', 'bowl', 'card', 'dart', 'skittle', 'draught'];
var illnesses = ['diabete', 'measle', 'mump', 'rabie', 'ricket', 'shingle'];
var misc = ['kudo', 'premise', 'shamble', 'glasse', 'spectacle', 'jitter',
    'alm', 'fece', 'bowel', 'sud', 'entrail', 'electronic', 'outskirt', 'odd', 'tropic',
    'riche', 'surrounding', 'thank', 'heroic', 'remain', 'amend'
];
addRule(new RegExp('\\b(?:' + tools.concat(clothes, games, illnesses, misc).join('|') + ')s\\b', 'i'), function (w) { return w; });
addRule(/ics$/i, function (w) { return w; });
addRule(/\b(?:tea|sugar|water|air|rice|knowledge|beauty|anger|fear|love|money|research|safety|evidence)\b/i, function (w) { return w; });
function plural(word, num) {
    var i, rule;
    if (num !== 1 || num === undefined) {
        for (i = 0; i < rules.length; i++) {
            rule = rules[i];
            if (type(rule[0]) === 'RegExp' && rule[0].test(word)) {
                return type(rule[1]) === 'Function' ? rule[1](word, rule[0]) : rule[1];
            }
            if (type(rule[0]) === 'String' && rule[0] === word) {
                return type(rule[1]) === 'Function' ? rule[1](word) : rule[1];
            }
        }
        return word + 's';
    }
    return word;
}
module.exports = plural;
module.exports.addRule = addRule;
module.exports.unmonkeyPatch = function () {
    String.prototype.plural = null;
};
module.exports.monkeyPatch = function () {
    if (String.prototype.plural === undefined) {
        String.prototype.plural = function (num) {
            return plural(this, num);
        };
    }
    else {
        throw new Error('Unable to add plural function to String object');
    }
};
module.exports.VERSION = require('./package.json').version;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL0JlbGxDdWJlRGV2L3NpdGUtdGVzdGluZy9kZXBsb3ltZW50LyIsInNvdXJjZXMiOlsiaW5jbHVkZWRfbm9kZV9tb2R1bGVzL3BsdXJhbC9pbmRleC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxZQUFZLENBQUM7QUFFYixJQUFJLEtBQUssR0FBRyxFQUFFLENBQUE7QUFFZCxTQUFTLElBQUksQ0FBQyxHQUFHO0lBQ2YsT0FBTyxNQUFNLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFBO0FBQ3pELENBQUM7QUFFRCxTQUFTLE9BQU8sQ0FBQyxLQUFLLEVBQUUsTUFBTTtJQUM1QixLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUE7SUFDOUIsT0FBTyxNQUFNLENBQUE7QUFDZixDQUFDO0FBSUQsT0FBTyxDQUFDLGtCQUFrQixFQUFFLFVBQVMsQ0FBQyxJQUFJLE9BQU8sQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUEsQ0FBQyxDQUFDLENBQUMsQ0FBQTtBQUdyRixPQUFPLENBQUMsWUFBWSxFQUFFLFVBQVMsQ0FBQyxJQUFJLE9BQU8sQ0FBQyxHQUFHLElBQUksQ0FBQSxDQUFDLENBQUMsQ0FBQyxDQUFBO0FBR3RELE9BQU8sQ0FBQyx1Q0FBdUMsRUFBRSxVQUFTLENBQUMsSUFBSSxPQUFPLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFBLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDekcsT0FBTyxDQUFDLGdCQUFnQixF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QUFDLEtBQUssUUFBUSxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUMsS0FBSyxJQUFJLEVBQUU7Z0JBQ2xELE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLFVBQVUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUE7YUFDOUQ7U0FFRjtRQUVELE9BQU8sSUFBSSxHQUFHLEdBQUcsQ0FBQTtLQUNsQjtJQUNELE9BQU8sSUFBSSxDQUFBO0FBQ2IsQ0FBQztBQUVELE1BQU0sQ0FBQyxPQUFPLEdBQUcsTUFBTSxDQUFBO0FBRXZCLE1BQU0sQ0FBQyxPQUFPLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQTtBQUVoQyxNQUFNLENBQUMsT0FBTyxDQUFDLGFBQWEsR0FBRztJQUM3QixNQUFNLENBQUMsU0FBUyxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUM7QUFDakMsQ0FBQyxDQUFBO0FBRUQsTUFBTSxDQUFDLE9BQU8sQ0FBQyxXQUFXLEdBQUc7SUFDM0IsSUFBSSxNQUFNLENBQUMsU0FBUyxDQUFDLE1BQU0sS0FBSyxTQUFTLEVBQUU7UUFDekMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxNQUFNLEdBQUcsVUFBUyxHQUFHO1lBQ3BDLE9BQU8sTUFBTSxDQUFDLElBQUksRUFBRSxHQUFHLENBQUMsQ0FBQTtRQUMxQixDQUFDLENBQUE7S0FDRjtTQUNJO1FBQ0gsTUFBTSxJQUFJLEtBQUssQ0FBQyxnREFBZ0QsQ0FBQyxDQUFBO0tBQ2xFO0FBQ0gsQ0FBQyxDQUFBO0FBRUQsTUFBTSxDQUFDLE9BQU8sQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFDLGdCQUFnQixDQUFDLENBQUMsT0FBTyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG52YXIgcnVsZXMgPSBbXVxuXG5mdW5jdGlvbiB0eXBlKG9iaikge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG9iaikuc2xpY2UoOCwgLTEpXG59XG5cbmZ1bmN0aW9uIGFkZFJ1bGUobWF0Y2gsIHJlc3VsdCkge1xuICBydWxlcy51bnNoaWZ0KFttYXRjaCwgcmVzdWx0XSlcbiAgcmV0dXJuIHBsdXJhbFxufVxuXG4vLyB3b3JkcyBsaWtlIGNoZXJyeSwgd2hlcmUgYSB3b3JkIGVuZHMgaW4gYSB5LCBidXQgdGhlIGxldHRlciBiZWZvcmUgdGhlIHkgaXMgYSBjb25zb25hbnRcbi8vIGFsc28gY29udGFpbnMgdW5pcXVlIHJ1bGUgZm9yIHdvcmRzIHRoYXQgZW5kIHdpdGggJ3F1eScgKHNvbGlsb3F1eSlcbmFkZFJ1bGUoL1teYWVpb3VdeSR8cXV5JC9pLCBmdW5jdGlvbih3KSB7IHJldHVybiB3LnN1YnN0cigwLCB3Lmxlbmd0aCAtIDEpICsgJ2llcycgfSlcblxuLy8gd29yZHMgdGhhdCBlbmQgd2l0aCBjaCwgeCwgcyBhcHBlbmQgJ2VzJ1xuYWRkUnVsZSgveCR8Y2gkfHMkL2ksIGZ1bmN0aW9uKHcpIHsgcmV0dXJuIHcgKyAnZXMnIH0pXG5cbi8vIHdvcmRzIHRoYXQgbWFpbnRhaW4gbGF0aW4vZ3JlZWsgcGx1cmFsXG5hZGRSdWxlKC9udWNsZXVzfHN5bGxhYnVzfGZvY3VzfGZ1bmd1c3xjYWN0dXMvaSwgZnVuY3Rpb24odykgeyByZXR1cm4gdy5zdWJzdHIoMCwgdy5sZW5ndGggLSAyKSArICdpJyB9KTtcbmFkZFJ1bGUoL3RoZXNpc3xjcmlzaXMvaSwgZnVuY3Rpb24odykgeyByZXR1cm4gdy5zdWJzdHIoMCwgdy5sZW5ndGggLSAyKSArICdlcycgfSk7XG5hZGRSdWxlKC9hcHBlbmRpeHxpbmRleC9pLCBmdW5jdGlvbih3KSB7IHJldHVybiB3LnN1YnN0cigwLCB3Lmxlbmd0aCAtIDIpICsgJ2ljZXMnIH0pO1xuXG4vLyBzdGVyZW8gLT4gc3RlcmVvc1xuYWRkUnVsZSgvW2FlaW91eV1vJC9pLCBmdW5jdGlvbih3KSB7IHJldHVybiB3ICsgJ3MnIH0pO1xuYWRkUnVsZSgvW15hZWlvdXldbyQvaSwgZnVuY3Rpb24odykgeyByZXR1cm4gdyArICdlcycgfSk7XG5cbi8vIGYvZmUgZW5kaW5nIHdvcmRzIGdldHMgc3dpdGNoZWQgdG8gdmVzXG4vLyB1bmxlc3MgaXQncyBkd2FyZiBvciByb29mXG5hZGRSdWxlKC8oZmU/JCkvaSwgZnVuY3Rpb24odywgcmVnZXgpIHtcbiAgaWYgKHcgPT09ICdkd2FyZicgfHwgdyA9PT0gJ3Jvb2YnKSB7XG4gICAgcmV0dXJuIHcgKyAncydcbiAgfVxuICByZXR1cm4gdy5yZXBsYWNlKHJlZ2V4LCAndmVzJylcbn0pXG5cbmFkZFJ1bGUoJ2NyaXRlcmlvbicsICdjcml0ZXJpYScpXG5hZGRSdWxlKCdiYWN0ZXJpdW0nLCAnYmFjdGVyaWEnKVxuYWRkUnVsZSgnbWVtbycsICdtZW1vcycpXG5hZGRSdWxlKCdjZWxsbycsICdjZWxsb3MnKVxuYWRkUnVsZSgnZGllJywgJ2RpY2UnKVxuYWRkUnVsZSgnZ29vc2UnLCAnZ2Vlc2UnKVxuYWRkUnVsZSgnbW91c2UnLCAnbWljZScpXG5hZGRSdWxlKCdwZXJzb24nLCAncGVvcGxlJylcbmFkZFJ1bGUoJ2NoaWxsaScsICdjaGlsbGllcycpXG5cbmFkZFJ1bGUoL14oPzp3byk/bWFuJC9pLCBmdW5jdGlvbih3KSB7IHJldHVybiB3LnJlcGxhY2UoL2EvLCAnZScpIH0pXG5cbi8vIGFuaW1hbHMgdy8gbm8gcGx1cmFsXG5hZGRSdWxlKC9cXGIoPzpiaXNvbnxjb2R8ZGVlcnxmb3dsfGhhbGlidXR8bW9vc2V8c2hlZXApXFxiL2ksIGZ1bmN0aW9uKHcpIHsgcmV0dXJuIHcgfSlcblxuLy8gc2luZ3VsYXIgbm91bnMgdGhhdCBlbmQgaW4gLXNcbnZhciB0b29scyA9IFsnZ29nZ2xlJywgJ3NjaXNzb3InLCAncGxpZXInLCAndG9uZycsICd0d2VlemVyJ11cbnZhciBjbG90aGVzID0gWyd0cm91c2VyJywgJ3BhbnQnLCAncGFudGllJywgJ2Nsb3RoZSddXG52YXIgZ2FtZXMgPSBbJ2JpbGxpYXJkJywgJ2Jvd2wnLCAnY2FyZCcsICdkYXJ0JywgJ3NraXR0bGUnLCAnZHJhdWdodCddXG52YXIgaWxsbmVzc2VzID0gWydkaWFiZXRlJywgJ21lYXNsZScsICdtdW1wJywgJ3JhYmllJywgJ3JpY2tldCcsICdzaGluZ2xlJ11cbnZhciBtaXNjID0gWydrdWRvJywgJ3ByZW1pc2UnLCAnc2hhbWJsZScsICdnbGFzc2UnLCAnc3BlY3RhY2xlJywgJ2ppdHRlcicsXG4gICdhbG0nLCAnZmVjZScsICdib3dlbCcsICdzdWQnLCAnZW50cmFpbCcsICdlbGVjdHJvbmljJywgJ291dHNraXJ0JywgJ29kZCcsICd0cm9waWMnLFxuICAncmljaGUnLCAnc3Vycm91bmRpbmcnLCAndGhhbmsnLCAnaGVyb2ljJywgJ3JlbWFpbicsICdhbWVuZCdcbl1cbmFkZFJ1bGUobmV3IFJlZ0V4cCgnXFxcXGIoPzonICsgdG9vbHMuY29uY2F0KGNsb3RoZXMsIGdhbWVzLCBpbGxuZXNzZXMsIG1pc2MpLmpvaW4oJ3wnKSArICcpc1xcXFxiJywgJ2knKSwgZnVuY3Rpb24odykgeyByZXR1cm4gd30pXG5cbi8vIG1vc3Qgd29yZHMgZW5kaW5nIGluIC1pY3MgYXJlIHRoZSBzYW1lIGluIHRoZWlyIHBsdXJhbCBmb3JtXG4vLyBtYXRoZW1hdGljcywgc3RhdGlzdGljcywgbGluZ3Vpc3RpY3MsIGNsYXNzaWNzLCBhY291c3RpY3NcbmFkZFJ1bGUoL2ljcyQvaSwgZnVuY3Rpb24odykgeyByZXR1cm4gdyB9KVxuXG4vLyB1bmNvdW50YWJsZVxuYWRkUnVsZSgvXFxiKD86dGVhfHN1Z2FyfHdhdGVyfGFpcnxyaWNlfGtub3dsZWRnZXxiZWF1dHl8YW5nZXJ8ZmVhcnxsb3ZlfG1vbmV5fHJlc2VhcmNofHNhZmV0eXxldmlkZW5jZSlcXGIvaSwgZnVuY3Rpb24odykgeyByZXR1cm4gdyB9KVxuXG5mdW5jdGlvbiBwbHVyYWwod29yZCwgbnVtKSB7XG4gIHZhciBpXG4gICAgLCBydWxlXG5cbiAgaWYgKG51bSAhPT0gMSB8fCBudW0gPT09IHVuZGVmaW5lZCkge1xuICAgIGZvciAoaSA9IDA7IGkgPCBydWxlcy5sZW5ndGg7IGkrKykge1xuICAgICAgcnVsZSA9IHJ1bGVzW2ldXG5cbiAgICAgIGlmICh0eXBlKHJ1bGVbMF0pID09PSAnUmVnRXhwJyAmJiBydWxlWzBdLnRlc3Qod29yZCkpIHtcbiAgICAgICAgcmV0dXJuIHR5cGUocnVsZVsxXSkgPT09ICdGdW5jdGlvbicgPyBydWxlWzFdKHdvcmQsIHJ1bGVbMF0pIDogcnVsZVsxXVxuICAgICAgfVxuICAgICAgaWYgKHR5cGUocnVsZVswXSkgPT09ICdTdHJpbmcnICYmIHJ1bGVbMF0gPT09IHdvcmQpIHtcbiAgICAgICAgcmV0dXJuIHR5cGUocnVsZVsxXSkgPT09ICdGdW5jdGlvbicgPyBydWxlWzFdKHdvcmQpIDogcnVsZVsxXVxuICAgICAgfVxuXG4gICAgfVxuXG4gICAgcmV0dXJuIHdvcmQgKyAncydcbiAgfVxuICByZXR1cm4gd29yZFxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHBsdXJhbFxuXG5tb2R1bGUuZXhwb3J0cy5hZGRSdWxlID0gYWRkUnVsZVxuXG5tb2R1bGUuZXhwb3J0cy51bm1vbmtleVBhdGNoID0gZnVuY3Rpb24oKSB7XG4gIFN0cmluZy5wcm90b3R5cGUucGx1cmFsID0gbnVsbDtcbn1cblxubW9kdWxlLmV4cG9ydHMubW9ua2V5UGF0Y2ggPSBmdW5jdGlvbigpIHtcbiAgaWYgKFN0cmluZy5wcm90b3R5cGUucGx1cmFsID09PSB1bmRlZmluZWQpIHtcbiAgICBTdHJpbmcucHJvdG90eXBlLnBsdXJhbCA9IGZ1bmN0aW9uKG51bSkge1xuICAgICAgcmV0dXJuIHBsdXJhbCh0aGlzLCBudW0pXG4gICAgfVxuICB9XG4gIGVsc2Uge1xuICAgIHRocm93IG5ldyBFcnJvcignVW5hYmxlIHRvIGFkZCBwbHVyYWwgZnVuY3Rpb24gdG8gU3RyaW5nIG9iamVjdCcpXG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMuVkVSU0lPTiA9IHJlcXVpcmUoJy4vcGFja2FnZS5qc29uJykudmVyc2lvblxuIl19