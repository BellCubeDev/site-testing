var e,t;import*as s from"./assets/site/mdl/material.js";import*as i from"./universal_quotes.js";window.domParser=new DOMParser;export function afterDelay(e,t,...s){return window.setTimeout(t,e,...s||[])}export function wait(e){return new Promise(t=>afterDelay(e,t))}export class UpdatableObject{update(){this.suppressUpdates||(this.suppressUpdates=!0,this.update_(),this.suppressUpdates=!1)}update_bound=this.update.bind(this);update_(){}updateFromInput(){this.suppressUpdates||(this.suppressUpdates=!0,this.updateFromInput_(),this.suppressUpdates=!1)}updateFromInput_bound=this.updateFromInput.bind(this);updateFromInput_(){}destroy(){this.suppressUpdates=!0,queueMicrotask(()=>this.suppressUpdates=!0),this.destroy_()}destroy_bound=this.destroy.bind(this);destroy_(){}suppressUpdates=!1}export function nestAnimationFrames(e,t){if(e<=0)return t();requestAnimationFrame(()=>nestAnimationFrames(e-1,t))}export async function animationFrames(e){return new Promise(t=>nestAnimationFrames(e,t))}export function anAnimationFrame(){return animationFrames(1)}export function capitalizeFirstLetter(e){return e.charAt(0).toUpperCase()+e.slice(1)}export function trimWhitespace(e,t=!1){return e.trimStart().trimEnd().replace(/[^\S\n]*$/gm,"")+(t?"\n":"")}const n={Enter:[[[],"activate"]]," ":[[[],"activate"]],Escape:[[[],"exit"]],Esc:[[[],"exit"]],z:[[["ctrl"],"undo"],[["meta"],"undo"],[["ctrl","shift"],"redo"],[["meta","shift"],"redo"]],y:[[["ctrl"],"redo"]],s:[[["ctrl"],"save"]]};export function registerForEvents(e,t,s){o(e,t,s,!1)}export function unregisterForEvents(e,t,s){o(e,t,s,!0)}export const registerForEvents_wrappedFunctions=new Map;export const registerForEvents_handledKeys=new Map;function o(e,t,s,i=!1){let o=!1;const a=i?e.removeEventListener.bind(e):e.addEventListener.bind(e);function r(e){let t=registerForEvents_wrappedFunctions.get(e);return t||(t=function(...t){if(!o)return o=!0,queueMicrotask(()=>o=!1),e.call(this,...t)},registerForEvents_wrappedFunctions.set(e,t)),t}t=Object.fromEntries(Object.entries(t).map(([e,t])=>[e,r(t)]));let l=registerForEvents_handledKeys.get(t);l||(l=function(s){if(!(s instanceof KeyboardEvent))return;const i=n[s.key]?.find(([e,t])=>e.every(e=>s[`${e}Key`]))?.[1]||"anyKey",o=t[i];o&&"anyKey"!==i&&(s.preventDefault(),s.stopPropagation());const a=o||t.anyKey;a?.call(e,s)},registerForEvents_handledKeys.set(t,l)),a("keydown",l,s);for(const n in t)switch(n){case"activate":a(window.clickEvt,t[n],s);break;case"change":a("change",t[n],s),a("input",t[n],s);break;case"dropdownInput":a("bcd-dropdown-change",t[n],s)}}window.registerForEvents=registerForEvents;export function setProxies(e,t,s){if(!e||"object"!=typeof e)return e;if(t.set){const e=t.set,i=(i,n,o,a)=>n in i&&i[n]===o||(o&&"object"==typeof o&&(o=setProxies(o,t,s)),e.call(t,i,n,o,a)??!0);t.set=i}for(const[i,n]of Object.entries(e))s?.(n),n&&"object"==typeof n&&(e[i]=new Proxy(setProxies(n,t,s),t));return new Proxy(e,t)}export function randomNumber(e=0,t=1,s=0){const i=Math.pow(10,s);return Math.round((Math.random()*(t-e)+e)*i)/i}window.domParser=new DOMParser;export function focusAnyElement(e,t=!0){if(!e||!e.focus)return;const s=e.hasAttribute("tabindex");s||e.setAttribute("tabindex","-8311"),e.focus({preventScroll:t}),nestAnimationFrames(2,()=>{s||e.removeAttribute("tabindex")})}export function copyCode(e){if(!e)throw new Error("No element provided to copyCode with!");const t=e.parentElement?.querySelector("code");if(!t)throw new Error("No code element found to copy from!");navigator.clipboard.writeText(trimWhitespace(t.textContent??"",!0));const s=window.getSelection(),i=new Range;i.selectNode(t),s.removeAllRanges(),s.addRange(i)}window.copyCode=copyCode;export function getInputValue(e){return e.value||e.getAttribute("bcdPlaceholder")||e.placeholder||""}function a(e){let t=this.getElementsByTagName(e)[0];return t||(t=(this instanceof Document?this:this.ownerDocument).createElement(e,{is:e}),this.appendChild(t)),t}function r(e,t=1){const s=[...this.getElementsByTagName(e)];let i=0;for(let n=0;i<=t&&n<s.length;n++){const t=s[n];t&&t.tagName===e&&(t.remove(),i++)}}Element.prototype.getOrCreateChildByTag=a,Document.prototype.getOrCreateChildByTag=a,Element.prototype.removeChildByTag=r,Document.prototype.removeChildByTag=r,Set.prototype.moveItem=function(e,t,s="below"){if(!this.has(e)||!this.has(t))return!1;const i=[...this],n=i.indexOf(e),o=i.indexOf(t);return-1!==n&&-1!==o&&(i.splice(n,1),i.splice(o+("below"===s?1:0),0,e),this.clear(),i.forEach(e=>this.add(e)),!0)},Set.prototype.moveIndex=function(e,t){if(!this.has(e))return!1;const s=[...this],i=s.indexOf(e);return-1!==i&&(t<0&&(t=s.length+t),s.splice(i,1),s.splice(t,0,e),this.clear(),s.forEach(e=>this.add(e)),!0)};export function getSetIndex(e,t){let s=0;for(const i of e){if(s===t)return i;s++}}function l(e){const t=[];for(const[,s]of this)s instanceof e&&t.push(s);return t}export function registerUpgrade(e,t,s,i=!1,n=!1){d(e,n,e=>{if(!e.upgrades){const t=new Map;t.getExtends=l,e.upgrades=t}e.upgrades.set(t.constructor,t)}),s&&d(s,i,e=>{if(!e.targetingComponents){const t=new Map;t.getExtends=l,e.targetingComponents=t}e.targetingComponents.set(t.constructor,t)})}function d(e,t,s){t&&h(e,s),s(e)}function h(e,t){for(let s=0;s<e.children.length;s++)h(e.children[s],t),t(e.children[s])}!function(e){e.transitionDur="transition-duration",e.animDur="animation-duration",e.marginTop="margin-top",e.classIsOpen="is-open",e.classAdjacent="adjacent",e.classDetailsInner="js-bcd-details-inner",e.errItem="Error Item:"}(e||(e={})),window.queryParams={},"?"===window.location.search[0]&&window.location.search.substring(1).split("&").map(e=>e.split("=")).forEach(e=>window.queryParams[e[0].trim()]=e[1]?.trim()??"");const c=[];export function registerBCDComponent(e){try{s.componentHandler.register({constructor:e,classAsString:e.asString,cssClass:e.cssClass,widget:!1}),s.componentHandler.upgradeElements(document.getElementsByClassName(e.cssClass))}catch(t){return console.error("[BCD-Components] Error registering component",e.asString,"with class",e.cssClass,":\n",t),t}return!1}export function registerBCDComponents(...e){const t=e.length?e:c;for(let s=0;s<t.length;s++)registerBCDComponent(t[s])}export class BCD_CollapsibleParent{details;details_inner;summary;openIcons90deg;self;adjacent=!1;constructor(t){this.self=t,this.adjacent=t.classList.contains(e.classAdjacent)}isOpen(){return this.details.classList.contains(e.classIsOpen)||this.summary.classList.contains(e.classIsOpen)}toggle(e=!0){this.isOpen()?this.close(e):this.open(e)}reEval(e=!0,t){requestAnimationFrame(()=>{this.isOpen()?this.open(e,t):this.close(e,t)})}stateChangePromise(e){if(void 0!==e&&this.isOpen()===e||"0s"===getComputedStyle(this.details_inner).transitionDuration)return new Promise(e=>requestAnimationFrame(()=>{this.onTransitionEnd(),e()}));const t=this.onTransitionEnd.bind(this);return new Promise(e=>{this.details_inner.addEventListener("transitionend",function i(n){"margin-top"===n.propertyName&&(s.removeEventListener("transitionend",i),afterDelay(10,()=>{t(n),e()}))});const s=this.details_inner})}open(t=!0,s=!1){const i=this.stateChangePromise(!0);return s||this.evaluateDuration(t),this.details_inner.ariaHidden="false",this.details_inner.style.visibility="visible",BCD_CollapsibleParent.setDisabled(this.details_inner,!1,!1),this.details.classList.add(e.classIsOpen),this.summary.classList.add(e.classIsOpen),nestAnimationFrames(3,()=>{this.details_inner.style.marginTop=this.details.getAttribute("data-margin-top")||"0",s&&nestAnimationFrames(2,()=>this.evaluateDuration.bind(this,t,!0))}),s?this.instantTransition():i}hasClosedFinal=!1;close(t=!0,s=!1,i=!1,n){if(this.hasClosedFinal)return;i&&(this.summary.upgrades.getExtends(BCD_CollapsibleParent)[0].hasClosedFinal=!0,this.details.upgrades.getExtends(BCD_CollapsibleParent)[0].hasClosedFinal=!0),void 0===n?this.evaluateDuration(t,!1):this.details_inner.style.transitionDuration=`${n}ms`;const o=this.stateChangePromise(!1);return this.details_inner.style.marginTop=`-${this.details_inner.offsetHeight+32}px`,this.details.classList.remove(e.classIsOpen),this.summary.classList.remove(e.classIsOpen),BCD_CollapsibleParent.setDisabled(this.details_inner,!0),s?(nestAnimationFrames(2,()=>this.evaluateDuration(t,!1)),this.instantTransition()):(i&&(this.summary.style.pointerEvents="none"),o)}onTransitionEnd(e){e&&"margin-top"!==e.propertyName||(this.isOpen()?BCD_CollapsibleParent.setDisabled(this.details_inner,!1):requestAnimationFrame(()=>{this.details_inner.ariaHidden="true",this.details_inner.style.visibility="none",BCD_CollapsibleParent.setDisabled(this.details_inner,!0)}))}instantTransition(){if(this.details_inner){this.details_inner.style.transitionDuration="0s",this.details_inner.style.animationDuration="0s";for(const e of this.openIcons90deg)e.style.animationDuration="0s"}return this.onTransitionEnd(),new Promise(e=>e())}static setDisabled(e,t,s=!0){for(const r of e.children)this.setDisabled(r,t);const i=e.getAttribute("data-was-disabled"),n=e.getAttribute("data-old-tabindex"),o=e.getAttribute("data-force-pointer-events");null!==o&&(s="true"===o);const a=e.getAttribute("data-force-disabled");null!==a&&(t="true"===a),t?(null===i&&e.setAttribute("data-was-disabled",e.hasAttribute("disabled")?"true":"false"),e.setAttribute("disabled",""),e.ariaDisabled="true",null===n&&e.setAttribute("data-old-tabindex",e.getAttribute("tabindex")||""),e.tabIndex=-1):(e.removeAttribute("data-was-disabled"),"true"===i?e.setAttribute("disabled",""):e.removeAttribute("disabled"),e.ariaDisabled="true"===i?"true":"false",(null!==n||e.hasAttribute("data-old-tabindex"))&&(n?e.setAttribute("tabindex",n):e.removeAttribute("tabindex"),e.removeAttribute("data-old-tabindex"))),e.style.pointerEvents=s?"":"none"}evaluateDuration(e=!0,t=!0){if(e&&this.details_inner){const e=this.details_inner.offsetHeight;this.details_inner.style.transitionDuration=(t?250:300)+(t?.3:.35)*(e+32)+"ms";for(const t of this.openIcons90deg)t.style.transitionDuration=250+.15*(e+32)+"ms"}}}export class BCDDetails extends BCD_CollapsibleParent{static cssClass="js-bcd-details";static asString="BellCubicDetails";constructor(t){super(t),this.details=t,this.details_inner=document.createElement("div"),this.details_inner.classList.add(e.classDetailsInner);const s=[];for(const e of this.details.childNodes)s.push(e);for(const e of s)this.details_inner.appendChild(e);if(this.details.appendChild(this.details_inner),this.adjacent){const t=this.self.previousElementSibling;if(!t||!t.classList.contains(BCDSummary.cssClass))throw console.log(e.errItem,this),new TypeError("[BCD-DETAILS] Error: Adjacent Details element must be preceded by a Summary element.");this.summary=t}else{const t=this.self.ownerDocument.querySelector(`.js-bcd-summary[for="${this.details.id}"`);if(!t)throw console.log(e.errItem,this),new TypeError("[BCD-DETAILS] Error: Non-adjacent Details elements must have a Summary element with a `for` attribute matching the Details element's id.");this.summary=t}this.openIcons90deg=this.summary.getElementsByClassName("open-icon-90CC");const i=this.reEvalIfClosed.bind(this);new ResizeObserver(i).observe(this.details_inner),this.reEval(!0,!0),this.self.classList.add("initialized"),registerUpgrade(this.self,this,this.summary,!0)}reEvalIfClosed(){this.isOpen()||this.reEval(!0,!0)}}c.push(BCDDetails);export class BCDSummary extends BCD_CollapsibleParent{static cssClass="js-bcd-summary";static asString="BellCubicSummary";constructor(t){if(super(t),this.summary=t,registerForEvents(this.summary,{activate:this.activate.bind(this)}),this.openIcons90deg=this.summary.getElementsByClassName("open-icon-90CC"),this.adjacent){const t=this.self.nextElementSibling;if(!t||!t.classList.contains(BCDDetails.cssClass))throw console.log(e.errItem,this),new TypeError("[BCD-SUMMARY] Error: Adjacent Summary element must be proceeded by a Details element.");this.details=t}else{const t=this.self.ownerDocument.getElementById(this.summary.getAttribute("for")??"");if(!t)throw console.log(e.errItem,this),new TypeError("[BCD-SUMMARY] Error: Non-adjacent Details elements must have a summary element with a `for` attribute matching the Details element's id.");this.details=t}this.divertedCompletion(),registerUpgrade(this.self,this,this.details,!1,!0)}divertedCompletion(){queueMicrotask(()=>{const t=this.details.querySelector(`.${e.classDetailsInner}`);t?(this.details_inner=t,this.reEval(!0,!0),this.self.classList.add("initialized")):this.divertedCompletion()})}correctFocus(e){if(!e)return nestAnimationFrames(2,()=>{this.summary.blur()});focusAnyElement(this.summary)}activate(e){e&&("pointerType"in e&&!e.pointerType||"path"in e&&e.path&&e.path instanceof Array&&e.path?.slice(0,5).some(e=>"A"===e.tagName)||(this.toggle(),this.correctFocus(e instanceof KeyboardEvent)))}}c.push(BCDSummary);export class PrettyJSON{static cssClass="js-bcd-prettyJSON";static asString="bcd_prettyJSON";element_;constructor(e){registerUpgrade(e,this,null,!1,!0),this.element_=e;const t=JSON.parse(e.textContent??"");this.element_.textContent=JSON.stringify(t,null,2),this.element_.classList.add("initialized")}}c.push(PrettyJSON);export class BCDModalDialog extends EventTarget{static cssClass="js-bcd-modal";static asString="BellCubic Modal";static obfuscator;static modalsToShow=[];static shownModal=null;element_;closeByClickOutside;constructor(e){super(),registerUpgrade(e,this,null,!1,!0),this.element_=e,this.element_.ariaModal="true",this.element_.setAttribute("role","dialog"),this.element_.ariaHidden="true",this.element_.hidden=!0;const t=document.body??document.documentElement.getElementsByTagName("body")[0];t.prepend(e),BCDModalDialog.obfuscator||(BCDModalDialog.obfuscator=document.createElement("div"),BCDModalDialog.obfuscator.classList.add(s.MaterialLayout.cssClasses.OBFUSCATOR,"js-bcd-modal-obfuscator"),t.appendChild(BCDModalDialog.obfuscator)),this.closeByClickOutside=!this.element_.hasAttribute("no-click-outside"),afterDelay(1e3,(function(){const e=this.element_.getElementsByClassName("js-bcd-modal-close");for(const t of e)registerForEvents(t,{activate:this.boundHideFunction});this.element_.hasAttribute("open-by-default")&&this.show()}).bind(this))}static evalQueue(e=100){if(this.shownModal||!this.modalsToShow.length)return;const t=BCDModalDialog.modalsToShow.shift();if(!t)return this.evalQueue();BCDModalDialog.shownModal=t,afterDelay(e,t.show_forReal.bind(t))}show(){return BCDModalDialog.modalsToShow.push(this),BCDModalDialog.evalQueue(),new Promise(e=>{this.addEventListener("afterHide",t=>{"detail"in t&&"string"==typeof t.detail?e(t.detail):e(null)},{once:!0})})}static beforeShowEvent=new CustomEvent("beforeShow",{cancelable:!0,bubbles:!1,composed:!1});static afterShowEvent=new CustomEvent("afterShow",{cancelable:!1,bubbles:!1,composed:!1});show_forReal(){this.dispatchEvent(BCDModalDialog.beforeShowEvent)&&this.element_.dispatchEvent(BCDModalDialog.beforeShowEvent)&&(BCDModalDialog.obfuscator.classList.add(s.MaterialLayout.cssClasses.IS_DRAWER_OPEN),registerForEvents(BCDModalDialog.obfuscator,{activate:this.boundHideFunction}),this.element_.ariaHidden="false",this.element_.hidden=!1,"show"in this.element_?this.element_.show():this.element_.setAttribute("open",""),this.dispatchEvent(BCDModalDialog.afterShowEvent)&&this.element_.dispatchEvent(BCDModalDialog.afterShowEvent))}static getBeforeHideEvent(e=null){return new CustomEvent("beforeHide",{cancelable:!0,bubbles:!1,composed:!1,detail:e})}static getAfterHideEvent(e=null){return new CustomEvent("afterHide",{cancelable:!1,bubbles:!1,composed:!1,detail:e})}boundHideFunction=this.hide.bind(this);hide(e){let t=null;e&&e.currentTarget instanceof Element&&(t=e.currentTarget.getAttribute("data-modal-message")),e&&e.stopImmediatePropagation(),this.dispatchEvent(BCDModalDialog.getBeforeHideEvent(t))&&this.element_.dispatchEvent(BCDModalDialog.getBeforeHideEvent(t))&&(this.element_.ariaHidden="true","close"in this.element_?this.element_.close():this.element_.removeAttribute("open"),this.element_.hidden=!0,BCDModalDialog.obfuscator.classList.remove(s.MaterialLayout.cssClasses.IS_DRAWER_OPEN),BCDModalDialog.obfuscator.removeEventListener(window.clickEvt,this.boundHideFunction),BCDModalDialog.shownModal=null,this.dispatchEvent(BCDModalDialog.getAfterHideEvent(t))&&this.element_.dispatchEvent(BCDModalDialog.getAfterHideEvent(t)),BCDModalDialog.evalQueue())}}c.push(BCDModalDialog);!function(e){e.unaligned="mdl-menu--unaligned",e.topLeft="mdl-menu--bottom-left",e.topRight="mdl-menu--bottom-right",e.bottomLeft="mdl-menu--top-left",e.bottomRight="mdl-menu--top-right"}(t||(t={}));export class BCDDropdown extends s.MaterialMenu{doReorder;options_;options_keys;selectedOption="";element_;selectionTextElements;constructor(e,t,s=!0){super(e),this.element_=e,this.doReorder=s,s&&(this.Constant_.CLOSE_TIMEOUT=0),this.forElement_&&(this.forElement_?.removeEventListener(window.clickEvt,this.boundForClick_),this.forElement_?.removeEventListener("keydown",this.boundForKeydown_)),t&&t!==this.forElement_&&(this.forElement_=t),this.forElement_&&(this.forElement_.ariaHasPopup="true",this.forElement_.addEventListener(window.clickEvt,this.boundForClick_),this.forElement_.addEventListener("keydown",this.boundForKeydown_));const i=this.options();this.options_=i,this.options_keys=Object.keys(this.options_),this.selectedOption=this.options_keys[0]??"";for(const n of this.options_keys)this.element_.appendChild(this.createOption(n));this.selectionTextElements=this.forElement_?.getElementsByClassName("bcd-dropdown_value"),this.hide(),this.updateOptions(),this.element_.addEventListener("focusout",this.focusOutHandler.bind(this)),registerUpgrade(e,this,this.forElement_,!0,!0)}focusOutHandler(e){e.relatedTarget?.parentElement!==this.element_&&this.hide()}selectByString(e){this.options_keys.includes(e)?this.selectedOption=e:console.warn("[BCD-DROPDOWN] Attempted to select an option that does not exist:",e),this.updateOptions()}updateOptions(){const e=[...this.element_.getElementsByTagName("li")];if(this.doReorder){const t=e.find(e=>e.textContent===this.selectedOption);if(!t)throw console.log("[BCD-DROPDOWN] Erroring instance:",this),new Error("Could not find the selected option in the dropdown.");this.makeSelected(t)}const t=this.doReorder?e.filter(e=>e.textContent!==this.selectedOption):e;t.sort((e,t)=>this.options_keys.indexOf(e.textContent??"")-this.options_keys.indexOf(t.textContent??""));for(const s of t)this.element_.removeChild(s),this.makeNotSelected(s),this.element_.appendChild(s)}createOption(e,t,s=!1){const i=document.createElement("li");i.textContent=e,i.setAttribute("option-value",e),i.classList.add("mdl-menu__item"),this.registerItem(i);const n=t??this.options_[e]??null;return s&&(this.element_.appendChild(i),this.options_keys.push(e),this.options_[e]=n),n&&registerForEvents(i,{activate:n.bind(this)}),this.onCreateOption?.(e),i}onItemSelected(e){this.selectedOption=e.textContent??"",this.element_.dispatchEvent(new CustomEvent("bcd-dropdown-change",{detail:{dropdown:this,option:this.selectedOption}})),this.updateOptions()}makeSelected(e){this.doReorder&&e.classList.add("mdl-menu__item--full-bleed-divider"),e.blur();for(const t of this.selectionTextElements??[])t.textContent=e.textContent}makeNotSelected(e){e.classList.remove("mdl-menu__item--full-bleed-divider")}_optionElements;get optionElements(){return this._optionElements??=this.element_.getElementsByTagName("li")}hasShownOrHiddenThisFrame=!1;show(e){if(!this.hasShownOrHiddenThisFrame&&(this.hasShownOrHiddenThisFrame=!0,requestAnimationFrame(()=>this.hasShownOrHiddenThisFrame=!1),"false"!==this.element_.ariaHidden)){(e instanceof KeyboardEvent||e instanceof PointerEvent&&-1===e.pointerId||"mozInputSource"in e&&1!==e.mozInputSource)&&this.optionElements[0]?.focus(),this.element_.ariaHidden="false",this.element_.removeAttribute("disabled"),this.forElement_&&(this.forElement_.ariaExpanded="true");for(const e of this.optionElements)e.tabIndex=0;this.forElement_?.targetingComponents?.get(BCDTooltip)?.hide(),super.show(e)}}hide(){if(!this.hasShownOrHiddenThisFrame&&(this.hasShownOrHiddenThisFrame=!0,requestAnimationFrame(()=>this.hasShownOrHiddenThisFrame=!1),"true"!==this.element_.ariaHidden)){this.optionElements[0]?.blur(),this.element_.ariaHidden="true",this.element_.setAttribute("disabled",""),this.forElement_&&(this.forElement_.ariaExpanded="false");for(const e of this.optionElements)e.tabIndex=-1;super.hide()}}}export class bcdDropdown_AwesomeButton extends BCDDropdown{static asString="BCD - Debugger's All-Powerful Button";static cssClass="js-bcd-debuggers-all-powerful-button";constructor(e){super(e,void 0,!1)}options(){return{"View Debug Page"(){document.getElementById("debug-link")?.click()},"Toggle Page Monochrome"(){let[,e,t,s]=document.body.style.filter.match(/(.*)grayscale\((.*?)\)(.*)/)??[];e??="",t??="",s??="",document.body.style.filter=`${e}grayscale(${"100%"===t?"0%":"100%"})${s}`}}}}c.push(bcdDropdown_AwesomeButton);export class BCDTabButton extends s.MaterialButton{static asString="BCD - Tab List Button";static cssClass="js-tab-list-button";static anchorToSet="";element_;boundTab;name="";setAnchor=!1;constructor(e){if("BUTTON"!==e.tagName)throw new TypeError("A BellCubic Tab Button must be created directly from a <button> element.");const t=e.getAttribute("name");if(!t)throw new TypeError("A BellCubic Tab Button must have a name attribute.");const s=document.querySelector(`div.tab-content[name="${t}"]`);if(!s)throw new TypeError(`Could not find a tab with the name "${t}".`);if(!s.parentElement)throw new TypeError(`Tab with name "${t}" has no parent element!`);e.textContent=t,e.setAttribute("type","button"),super(e),registerUpgrade(e,this,s,!1,!0),this.element_=e,this.boundTab=s,this.name=t;const i=window.performance.getEntriesByType("navigation")?.[0];this.setAnchor=e.parentElement?.hasAttribute("do-tab-anchor")??!1,registerForEvents(this.element_,{activate:this.activate.bind(this)}),i&&"type"in i&&"reload"===i.type?this.makeSelected(0):this.setAnchor&&window.location.hash.toLowerCase()===`#tab-${t}`.toLowerCase()?queueMicrotask(this.makeSelected.bind(this)):this.makeSelected(0)}findTabNumber(e){const t=e??this.element_;return[...t.parentElement?.children??[]].indexOf(t)}makeSelected(e){const t=e??this.findTabNumber();if(-1===t)throw new Error("Could not find the tab number.");const s=[...this.element_.parentElement?.children??[]];if(!s[t]||s[t].classList.contains("active"))return;for(const n of s)n===this.element_?(n.classList.add("active"),n.setAttribute("aria-pressed","true"),n.setAttribute("aria-selected","true")):(n.classList.remove("active"),n.setAttribute("aria-pressed","false"),n.setAttribute("aria-selected","false"));if(!this.boundTab.parentElement)return;const i=[...this.boundTab.parentElement.children];for(const o of i)if(o===this.boundTab)o.classList.add("active"),o.classList.remove("tab-content--hidden"),"inert"in o&&(o.inert=!1),o.setAttribute("aria-hidden","false"),o.removeAttribute("disabled"),o.removeAttribute("tabindex"),this.boundTab.parentElement.style.marginLeft=`-${t}00vw`;else{function a(){o.classList.contains("active")||(o.classList.add("tab-content--hidden"),"inert"in o&&(o.inert=!0))}o.classList.remove("active"),o.parentElement.addEventListener("transitionend",a,{once:!0}),afterDelay(250,()=>{o.parentElement?.removeEventListener("transitionend",a),a()}),o.setAttribute("aria-hidden","true"),o.setAttribute("disabled",""),o.setAttribute("tabindex","-1")}this.setAnchor&&(BCDTabButton.anchorToSet=0==t?"":`#tab-${this.name}`.toLowerCase(),BCDTabButton.setAnchorIn3AnimFrames())}static setAnchorIn3AnimFrames(){nestAnimationFrames(3,()=>{""===BCDTabButton.anchorToSet?window.history.replaceState(null,"",window.location.pathname):window.location.hash=BCDTabButton.anchorToSet})}activate(){this.makeSelected(),this.element_.blur()}}c.push(BCDTabButton);export class BCDTooltip{static asString="BCD - Tooltip";static cssClass="js-bcd-tooltip";relation;position="top";element;boundElement;gapBridgeElement;openDelayMS;constructor(e){this.element=e,e.setAttribute("role","tooltip"),e.setAttribute("aria-role","tooltip"),this.gapBridgeElement=document.createElement("div"),this.gapBridgeElement.classList.add("js-bcd-tooltip_gap-bridge"),this.element.appendChild(this.gapBridgeElement),this.openDelayMS=parseInt(e.getAttribute("open-delay-ms")??"400");const t=e.getAttribute("tooltip-relation")??"proceeding";let s;switch(t){case"preceding":s=e.nextElementSibling;break;case"proceeding":s=e.previousElementSibling;break;case"child":s=e.parentElement;break;case"selector":{const t=e.getAttribute("tooltip-selector")??"";s=e.parentElement?.querySelector(t)??document.querySelector(t);break}default:throw new Error("Invalid tooltip-relation attribute!")}if(this.relation=t,!(s&&s instanceof HTMLElement))throw new Error("TOOLTIP - Could not find a valid HTML Element to bind to!");this.boundElement=s,registerUpgrade(e,this,this.boundElement,!0,!0);const i=e.getAttribute("tooltip-position");switch(i){case"top":case"bottom":case"left":case"right":this.position=i;break;default:throw new Error("Invalid tooltip-position attribute!")}const n=this.handleHoverEnter.bind(this),o=this.handleHoverLeave.bind(this),a=this.handleTouch.bind(this);window.addEventListener("contextmenu",o),this.element.addEventListener("contextmenu",e=>e.stopPropagation()),this.boundElement.addEventListener("mouseenter",n),this.element.addEventListener("mouseenter",n),this.boundElement.addEventListener("mouseleave",o),this.element.addEventListener("mouseleave",o),this.boundElement.addEventListener("touchstart",a,{passive:!0}),this.element.addEventListener("touchstart",a,{passive:!0}),this.boundElement.addEventListener("touchmove",a,{passive:!0}),this.element.addEventListener("touchmove",a,{passive:!0}),this.boundElement.addEventListener("touchend",a,{passive:!0}),this.element.addEventListener("touchend",a,{passive:!0}),this.boundElement.addEventListener("touchcancel",a,{passive:!0}),this.element.addEventListener("touchcancel",a,{passive:!0})}handleTouch(e){e.targetTouches.length>0?this.handleHoverEnter(void 0,!0):this.handleHoverLeave()}handleHoverEnter(e,t){const s=e instanceof MouseEvent?document.elementFromPoint(e?.x??0,e?.y??0):e?.target;if(s instanceof Element){for(const[,e]of s.upgrades??[])if(e instanceof BCDDropdown)return;for(const[,e]of s.targetingComponents??[])if(e instanceof BCDDropdown&&e.container_.classList.contains("is-visible"))return}this.showPart1(),afterDelay(t?0:600,(function(){this.element.classList.contains("active_")&&this.showPart2()}).bind(this))}showPart1(){this.element.classList.add("active_"),registerForEvents(window,{exit:this.hide_bound})}showPart2(){this.element.classList.add("active"),this.element.addEventListener("transitionend",this.setPosition.bind(this),{once:!0}),this.setPosition()}show(){this.showPart1(),this.showPart2()}handleHoverLeave(e){this.hide()}hide(){this.element.classList.remove("active_"),afterDelay(10,()=>{this.element.classList.contains("active_")||this.element.classList.remove("active")})}hide_bound=this.hide.bind(this);setPosition(){this.element.style.transform="none !important",this.element.style.transition="none !important";const e=window.getComputedStyle(this.element);e.transition,e.transform;const t=this.boundElement.getBoundingClientRect(),s={width:this.element.offsetWidth,height:this.element.offsetHeight};let i=t.top+t.height/2;const n=s.height/-2;let o=t.left+t.width/2;const a=s.width/-2;switch(this.position){case"top":case"bottom":this.gapBridgeElement.style.height="17px",this.gapBridgeElement.style.width=`${Math.max(s.width,t.width)}px`,this.gapBridgeElement.style.left=Math.min(t.left,o+a)-o-a+"px",o+a<8&&(o+=8-o-a),this.element.style.left=`${o}px`,this.element.style.marginLeft=`${a}px`;break;case"left":case"right":i+=8-i-n,this.gapBridgeElement.style.height=`${Math.max(s.height,t.height)}px`,this.gapBridgeElement.style.width="17px",this.gapBridgeElement.style.top=Math.min(t.top,i+n)-i-n+"px",i+n<8&&(i+=8-i-n),this.element.style.top=`${i}px`,this.element.style.marginTop=`${n}px`}switch(this.position){case"top":this.element.style.top=t.top-s.height-16+"px",this.gapBridgeElement.style.top=`${16+s.height}px`;break;case"bottom":this.element.style.top=`${t.top+t.height+16}px`,this.gapBridgeElement.style.top="-16px";break;case"left":this.element.style.left=t.left-s.width-16+"px",this.gapBridgeElement.style.left=`${16+s.width}px`;break;case"right":this.element.style.left=`${t.left+t.width+16}px`,this.gapBridgeElement.style.left="-16px"}this.element.style.transform="",this.element.style.transition=""}}c.push(BCDTooltip);export class bcdDynamicTextArea_base{element;constructor(e){registerUpgrade(e,this,null,!1,!0),this.element=e,this.adjust();const t=this.adjust.bind(this);registerForEvents(this.element,{change:t}),new ResizeObserver(t).observe(this.element),requestAnimationFrame(t)}}export class bcdDynamicTextAreaHeight extends bcdDynamicTextArea_base{static asString="BCD - Dynamic TextArea - Height";static cssClass="js-dynamic-textarea-height";constructor(e){super(e)}adjust(){this.element.style.height="",getComputedStyle(this.element).height;const e=parseInt(this.element.getAttribute("paddingPX")??"0");isNaN(e)&&console.warn("The paddingPX attribute of the dynamic text area is not a number:",this),this.element.style.height=`${this.element.scrollHeight+e}px`}}c.push(bcdDynamicTextAreaHeight);export class bcdDynamicTextAreaWidth extends bcdDynamicTextArea_base{static asString="BCD - Dynamic TextArea - Width";static cssClass="js-dynamic-textarea-width";constructor(e){super(e),new ResizeObserver(this.adjust.bind(this)).observe(this.element)}adjust(){this.element.style.width="",getComputedStyle(this.element).width;const e=parseInt(this.element.getAttribute("paddingPX")??"0");isNaN(e)&&console.warn("The paddingPX attribute of the dynamic text area is not a number:",this),this.element.style.width=`min(${this.element.scrollWidth+e}px, 100cqmin)`}}c.push(bcdDynamicTextAreaWidth);class m{static asString="BCD - Relative File Picker";static cssClass="js-relative-file-picker";element;button;relativeTo;get directory(){if(this.relativeTo)return"handle"in this.relativeTo?this.relativeTo:"directory"in this.relativeTo?this.relativeTo.directory:SettingsGrid.getSetting(this.relativeTo,"directory")}constructor(e,t){if(this.element=e,this.relativeTo=t,!t){const t=e.getAttribute("relative-to");if(!t)throw new Error("The relative file picker must have a relative-to attribute or have a folder specified at creation.");this.relativeTo=t.split(".")}registerUpgrade(e,this,null,!1,!0),registerForEvents(this.element,{change:this.boundOnChange}),this.button=document.createElement("button"),this.button.type="button",this.button.classList.add("mdl-button","mdl-js-button","mdl-button--fab","mdl-js-ripple-effect","js-relative-file-picker--button");const s=document.createElement("i");s.classList.add("material-icons"),s.textContent="edit_document",this.button.appendChild(s),this.element.after(this.button),registerForEvents(this.button,{activate:this.boundOnButtonClick})}onChange(){}boundOnChange=this.onChange.bind(this);async onButtonClick(){const e=await import("./filesystem-interface.js"),t=this.relativeTo instanceof e.BellFolder?this.relativeTo:this.directory;if(!t)return console.warn("The relative file picker has no relative-to folder specified",this);let s;try{[s]=await t.openFilePicker()}catch(n){if(n&&n instanceof DOMException&&"AbortError"===n.name)return;return void console.warn("The file picker threw some sort of error",n)}if(!s)return console.warn("The file picker returned no file",this);const i=await(this.directory?.resolveChildPath(s,!0));if(!i)return console.debug("The file picker returned a file that is not in the specified directory",s,this.directory);this.element.value=i.join("/"),this.element.dispatchEvent(new Event("change"))}boundOnButtonClick=this.onButtonClick.bind(this)}c.push(m);class u extends m{static asString="BCD - Relative Image Picker";static cssClass="js-relative-image-picker";imageElem;noImageElem;relation;static noImageDoc;constructor(e,t){switch(super(e,t),this.relation=e.getAttribute("relation")??"previous",this.relation){case"previous":this.imageElem=e.parentElement.previousElementSibling;break;case"next":this.imageElem=e.parentElement.nextElementSibling;break;case"parent":this.imageElem=e.parentElement;break;case"selector":{const t=e.getAttribute("selector");if(!t)throw new Error("The relative image picker must have a selector attribute if the relation is set to selector.");this.imageElem=e.parentElement.querySelector(t)||document.querySelector(t);break}default:throw new Error("The relative image picker must have a relation attribute that is either previous, next, parent, or selector.")}this.createNoImageElem(),registerUpgrade(e,this,this.imageElem,!0,!0)}async createNoImageElem(){let e;if(u.noImageDoc??=fetch("https://fonts.gstatic.com/s/i/short-term/release/materialsymbolsrounded/image/default/48px.svg").then(e=>e.text()),u.noImageDoc instanceof Promise){const t=await u.noImageDoc;u.noImageDoc=(new DOMParser).parseFromString(t,"text/html"),e=u.noImageDoc.querySelector("svg"),e.hasAttribute("viewBox")||e.setAttribute("viewBox",`0 0 ${e.getAttribute("width")||"0"} ${e.getAttribute("height")||"0"}`),e.removeAttribute("width"),e.removeAttribute("height")}if(e??=u.noImageDoc.querySelector("svg"),!e)throw new Error("Could not find the SVG element in the SVG document.");this.noImageElem=e.cloneNode(!0),this.noImageElem.classList.add("js-relative-image-picker--no-image"),this.imageElem?.before(this.noImageElem),this.imageElem?.src?this.showImage():this.hideImage()}hideImage(){this.imageElem&&(this.imageElem.style.display="none",this.imageElem.ariaDisabled="true",this.imageElem.ariaHidden="true"),this.noImageElem&&(this.noImageElem.style.display="block",this.noImageElem.ariaDisabled="false",this.noImageElem.ariaHidden="false")}showImage(){this.imageElem&&(this.imageElem.style.display="block",this.imageElem.ariaDisabled="false",this.imageElem.ariaHidden="false"),this.noImageElem&&(this.noImageElem.style.display="none",this.noImageElem.ariaDisabled="true",this.noImageElem.ariaHidden="true")}lastValue="";async onChange(){if(this.lastValue===this.element.value)return;this.lastValue=this.element.value,super.onChange();const e=this.directory;if(!this.imageElem)return console.info("The relative image picker does not have an image element to update.",this);if(!e)return this.hideImage(),console.info("The relative image picker does not have a directory to update the image from.",this,e);try{const t=e.getFile(this.element.value),[s,i]=await Promise.all([t,import("./filesystem-interface.js")]);if(!s||s instanceof i.InvalidNameError)return this.hideImage(),console.info("The relative image picker does not have a file handle to update the image with.",this);this.imageElem.src=await s.at(-1).readAsDataURL(),this.showImage()}catch{this.hideImage()}}}c.push(u),c.push(class{static asString="BCD - DOM SVG";static cssClass="js-dom-svg";svgSrc;element;constructor(e){const t=e.getAttribute("src");if(!t)throw new Error("The DOM SVG must have a src attribute.");this.svgSrc=t,this.element=e,this.initSvg()}async initSvg(){try{const e=await fetch(`https://api.allorigins.win/raw?url=${encodeURIComponent(this.svgSrc)}`,{cache:"force-cache"});if(!e.ok)return this.element.classList.add("js-dom-svg--error","js-dom-svg--loaded"),this.element.innerHTML=`<p>Could not load the image!</p><br><code>${e.status}: ${e.statusText||(408==e.status?"Fetching the graphic took too long!":"")}</code>`;const t=await e.text(),s=window.domParser.parseFromString(t,"image/svg+xml").querySelector("svg");if(!s)throw new Error("Could not find the SVG element in the SVG document.");this.element.appendChild(s),this.element.classList.add("js-dom-svg--loaded")}catch(e){if(!(e instanceof Error))throw e;return console.warn("Could not load the SVG image.",e),this.element.classList.add("js-dom-svg--error","js-dom-svg--loaded"),this.element.innerHTML=`<p>Could not load the image!</p><br>JavaScript Error: <code>${e.message}</code>`}}});const p=[];export function updateSettings(){for(let e=0;e<p.length;e++)p[e]()}export class SettingsGrid{static asString="BCD - Settings Grid";static cssClass="js-settings-grid";element;settingTemplate;settingsPath;settings;constructor(e){this.element=e,registerUpgrade(e,this,null,!1,!0),this.settings=JSON.parse(e.textContent??""),e.textContent="";const t=e.getAttribute("data-templateID");if(!t)throw new Error("Settings Grid is missing the data-templateID attribute!");const s=document.getElementById(t);if(!(s&&s instanceof HTMLTemplateElement))throw new Error(`Settings Grid cannot find a TEMPLATE element with the ID "${t}"!`);this.settingTemplate=s.content,this.settingsPath=e.getAttribute("data-settingsPath")?.split(".")??[];for(const[i,n]of Object.entries(this.settings))this.createSetting(i,n);this.element.hidden=!1}createSetting(e,t){const s=this.settingTemplate.children;if(!s[0])throw new Error("Settings Grid template is missing a root element!");for(const i of s){const s=i.cloneNode(!0);this.element.appendChild(s),this.upgradeElement(s,e,t),s.parentElement&&t.tooltip&&this.createTooltip(s,t.tooltip)}}createTooltip(e,t){const i=document.createElement("div");i.classList.add("js-bcd-tooltip"),i.setAttribute("tooltip-relation","proceeding"),i.setAttribute("tooltip-position","object"==typeof t?t.position:"bottom"),i.appendChild(document.createElement("p")).innerHTML="object"==typeof t?t.text:t,e.insertAdjacentElement("afterend",i),s.componentHandler.upgradeElement(i)}upgradeElement(e,t,i){if(!e||!("getAttribute"in e))return;const n=e.getAttribute("data-setting-filter");if(n&&n!==i.type)return e.remove();for(const s of e.children)this.upgradeElement(s,t,i);const o=e.getAttribute("data-setting-display");if(o){switch(o){case"id":e.id=`setting--${t}`;break;case"label":e.innerHTML=i.name;break;case"checkbox":if(!(e instanceof HTMLInputElement))throw new Error("Settings Grid template has a checkbox that is not an INPUT element!");e.checked=!!this.getSetting(t,!0),registerForEvents(e,{change:(()=>this.setSetting(t,e.checked)).bind(this)}),p.push(()=>{e.checked!==!!this.getSetting(t)&&e.click()});break;case"dropdown":e.classList.add(BCDSettingsDropdown.cssClass),e.setAttribute("data-options",JSON.stringify(i.options)),e.setAttribute("data-settings-path",JSON.stringify(this.settingsPath)),e.setAttribute("data-setting",t);break;default:console.warn(`A Settings Grid element has an unknown display type: ${o}`,e)}s.componentHandler.upgradeElement(e)}}getSetting(e,t=!1){return SettingsGrid.getSetting(this.settingsPath,e,t)}static getSetting(e,t,s=!1){try{let s=window;for(const t of e)s=s?.[t];if(void 0===s)throw new Error(`Settings Grid cannot find the settings path "${e.join(".")}"!`);return s[t]}catch(i){return void(s||console.error(i))}}setSetting(e,t,s=!1){SettingsGrid.setSetting(this.settingsPath,e,t,s)}static setSetting(e,t,s,i=!1){try{let i=window;for(const t of e)i=i?.[t];if(void 0===i)throw new Error(`Settings Grid cannot find the settings path "${e.join(".")}"!`);return i[t]=s}catch(n){return void(i||console.error(n))}}}c.push(SettingsGrid);let g={};export class BCDSettingsDropdown extends BCDDropdown{static asString="BCD Settings Dropdown";static cssClass="js-bcd-settings-dropdown";settingsPath=JSON.parse(this.element_.getAttribute("data-settings-path")??"[]");settingKey=this.element_.getAttribute("data-setting")??"";keyMap;constructor(e){super(e,e.previousElementSibling),this.keyMap=g,p.push(()=>{this.selectByString(SettingsGrid.getSetting(this.settingsPath,this.settingKey)??"")})}selectByString(e){super.selectByString(this.keyMap[e]??e)}options(){const e={};return Object.entries(JSON.parse(this.element_.getAttribute("data-options")??"[]")).forEach(([t,s])=>{e[s.toString()]=()=>{SettingsGrid.setSetting(this.settingsPath,this.settingKey,t)},this.keyMap??={},this.keyMap[t]=s}),g=this.keyMap,e}}c.push(BCDSettingsDropdown),window.BCDSettingsDropdown=BCDSettingsDropdown;export function bcd_universalJS_init(){afterDelay(10,()=>registerBCDComponents());for(const i of[...document.links])window.layout.drawer_?.contains(i)?i.rel+=" noopener":i.rel+=" noopener noreferrer";const e=document.getElementById("randomized-text-field");if(!e)throw new Error("No random text field found!");const t=i.getRandomQuote();e.innerHTML="string"==typeof t?t:t[1],afterDelay(100,()=>{const e=JSON.parse(`[${document.getElementById("lazy-styles")?.textContent??""}]`);for(const t of e){const e=document.createElement("link");e.rel="stylesheet",e.href=t,document.head.appendChild(e)}document.documentElement.classList.remove("lazy-styles-not-loaded"),window.lazyStylesLoaded=!0}),afterDelay(150,()=>{const e=document.querySelectorAll("[onclick]");for(const i of e){const e=i.onclick;e&&(registerForEvents(i,{activate:e}),i.onclick=null,i.removeAttribute("onclick"))}const t=document.querySelectorAll("button");function s(){this.blur()}for(const i of t)i.addEventListener("mouseup",s),i.addEventListener("touchend",s)}),afterDelay(200,()=>{const e=document.querySelectorAll(":is(nav, main) :is(h1, h2, h3, h4, h5, h6)");for(const s of e)s.id||(s.id=s.textContent?.trim().replace(/['"+=?!@#$%^*]+/gi,"").replace(/&+/gi,"and").replace(/[^a-z0-9]+/gi,"-").toLowerCase()??"");const t=document.querySelectorAll("nav :is(h1, h2, h3, h4, h5, h6)");for(const s of t)s.id&&(s.id=`nav-${s.id}`);if(window.location.hash.startsWith("#"))if("#"===window.location.hash)window.scrollTo(0,0);else{const e=document.getElementById(window.location.hash.substring(1));e?e.scrollIntoView({behavior:"smooth"}):console.info(`No element with ID "${window.location.hash.substring(1)}" found!`)}});const s=document.querySelector(".mdl-layout__drawer");s.addEventListener("drawerOpen",b),s.addEventListener("drawerClose",f),s.classList.contains("is-visible")?b.call(s):f.call(s)}function b(){this.removeAttribute("aria-hidden"),BCD_CollapsibleParent.setDisabled(this,!1)}function f(){this.setAttribute("aria-hidden","true"),BCD_CollapsibleParent.setDisabled(this,!0)}window.bcd_init_functions.universal=bcd_universalJS_init;
//# sourceMappingURL=https://raw.githubusercontent.com/BellCubeDev/site-testing/deployment/universal.js.map