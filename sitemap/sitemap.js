import{componentHandler as j}from"../assets/site/mdl/material.js";const _="js-bcd-summary_";window.bcd_init_functions.sitemap=async function(){const e=await fetch(`${window.location.href}sitemap.json`);C=await e.json(),console.debug("Working with object:\n",C);const t=document.getElementById("sitemap");q=document.getElementById("prefabs"),E=q.content.getElementById("prefab-sitemap-item"),S=q.content.getElementById("prefab-sitemap-dir");const o=C.pages.filter(e=>e.layout&&"compress_html"!==e.layout&&!1!==e.sitemap).map(e=>({...e,path:e.path.split("/")})).sort((e,t)=>{const[o,s]=[[...e.path],[...t.path]],[n,i]=[o.pop(),s.pop()];for(;o.length||s.length;){const[e,t]=[o.shift(),s.shift()];if(e!==t){if(!e)return 1;if(!t)return-1;if(e!==t)return e.localeCompare(t)}}return n===i?0:n.localeCompare(i)?1:-1});for(const s of o){s.path.pop(),console.debug("======================================================"),console.debug("Current file:",s.name),console.debug("Working with path:\n",JSON.stringify(s.path));let e=t;for(const t of s.path)e=A(t,e),console.debug("Dir",e);const o=E.cloneNode(!0);o.removeAttribute("id");const n=o.querySelector(".sitemap-item"),i=(s.formatted_title??s.title??s.name).trim();i in C.translation?n.textContent=C.translation[i]:n.textContent=i,n.setAttribute("href",s.url),console.debug("Directory to append within:",e);const r=e.querySelector(":scope > .js-bcd-details_ > .sitemap-dir-items")??e;console.debug("Adding item",o,"to",e),console.debug("Appending to...",r),r.appendChild(o),e=null,console.debug("======================================================")}t.querySelectorAll(".js-bcd-details_").forEach(e=>{e.classList.remove("js-bcd-details_"),e?.classList.add("js-bcd-details")}),t.querySelectorAll(`.${_}`).forEach(e=>{e.classList.remove(_),e.classList.add("js-bcd-summary")}),setTimeout(j.upgradeElements.bind(void 0,w))};const w=[];let E,S,q,C;function A(e,t){console.debug("Looking for dir",e);const o=t.querySelector("sitemap"===t.id?`:scope                    > .sitemap-dir > .js-bcd-summary_ > .sitemap-dir-name[data-dir="${e}"]`:`:scope > .js-bcd-details_ > .sitemap-dir > .js-bcd-summary_ > .sitemap-dir-name[data-dir="${e}"]`)?.parentElement.parentElement;if(console.debug("Existing dir:",o),o)return o;console.debug("Creating new dir:",e);const s=S.cloneNode(!0);s.removeAttribute("id");const n=s.querySelector(":scope > .js-bcd-summary_");let i=e.trim();i in C.translation&&(i=C.translation[i]);const r=n.querySelector(":scope > .sitemap-dir-name");r.textContent=i,r.setAttribute("data-dir",e);const a=t.querySelector(":scope > .js-bcd-details_")??t,c=a.querySelector(":scope > .sitemap-dir-items");return c?a.insertBefore(s,c):a.appendChild(s),w.push(...s.children),s}
//# sourceMappingURL=https://raw.githubusercontent.com/BellCubeDev/site-testing/deployment/sitemap/sitemap.js.map